{"version":3,"sources":["webpack:///./web/project/project.js","webpack:///./web/project/store.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;AACL,CAAC;AACD;AACA;AACA,CAAC,C;;;;;;;;ACnHD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,0CAA0C;AAC1C,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,gCAAgC,mCAAmC;AACnE;AACA;AACA;AACA,gCAAgC,iCAAiC;AACjE;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE;AACA;AACA;AACA,gCAAgC,8BAA8B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,CAAC,C","file":"project.js","sourcesContent":["/**\n * Created by sunxin on 2016/12/19.\n */\nvar mainNav=require(\"../component/mainNav.vue\")\nvar projectList=require(\"./component/projectList.vue\")\nvar teamList=require(\"./component/teamList.vue\")\nvar store=require(\"./store\");\nsession.remove(\"teamId\");\nsession.remove(\"teamName\");\nsession.remove(\"versionId\");\nsession.remove(\"versionName\");\nsession.remove(\"versionDis\");\nvar vue=new Vue({\n    el: \"#app\",\n    data: {\n        showAdd:false,\n        showTeam:false,\n        name:\"\",\n        dis:\"\",\n        addPending:false,\n        showApply:false,\n        tab:\"project\"\n    },\n    store:store,\n    components:{\n        \"mainnav\":mainNav,\n        \"projectlist\":projectList,\n        \"teamlist\":teamList\n    },\n    methods:{\n        addProject:function () {\n            if(!this.name)\n            {\n                this.$message.error(\"请输入名称\");\n                return;\n            }\n            var _this=this;\n            this.addPending=true;\n            store.dispatch(\"addProject\",{\n                name:this.name,\n                dis:this.dis\n            }).then(function (data) {\n                _this.addPending=false;\n                _this.name=\"\";\n                _this.dis=\"\"\n                if(data.code==200)\n                {\n                    $.notify(\"创建成功\",1);\n                    _this.showAdd=false;\n                }\n                else\n                {\n                    $.notify(data.msg,0);\n                }\n            })\n        },\n        addTeam:function () {\n            if(!this.name)\n            {\n                this.$message.error(\"请输入名称\");\n                return;\n            }\n            var _this=this;\n            this.addPending=true;\n            store.dispatch(\"addTeam\",{\n                name:this.name,\n                dis:this.dis\n            }).then(function (data) {\n                _this.addPending=false;\n                _this.name=\"\";\n                _this.dis=\"\"\n                if(data.code==200)\n                {\n                    $.notify(\"创建成功\",1);\n                    _this.showTeam=false;\n                }\n                else\n                {\n                    $.notify(data.msg,0);\n                }\n            })\n        },\n        importProject:function () {\n            $.showBox(this,\"importProject\");\n        },\n        handleApply:function (item,state) {\n            var _this=this;\n            $.startHud();\n            store.dispatch(\"handleApply\",{\n                item:item,\n                state:state\n            }).then(function (data) {\n                $.stopHud();\n                if(data.code!=200)\n                {\n                    $.notify(data.msg,0);\n                }\n            })\n        }\n    },\n    created:function () {\n        var _this=this;\n        store.dispatch(\"getList\").then(function () {\n            $.stopLoading();\n            if(store.state.arrApply.length>0)\n            {\n                _this.showApply=true;\n            }\n        }).catch(function (err) {\n            $.notify(err,0);\n        })\n    },\n})\n$.ready(function () {\n    $.startLoading();\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./web/project/project.js\n// module id = 295\n// module chunks = 1","module.exports=new Vuex.Store({\n    state:{\n        projectCreateList:[],\n        projectJoinList:[],\n        teamCreateList:[],\n        teamJoinList:[],\n        projectCreateSort:0,\n        projectJoinSort:0,\n        teamCreateSort:0,\n        teamJoinSort:0,\n        arrApply:[],\n    },\n    getters:{\n\n    },\n    mutations:{\n        addProjectCreate:function (state,data) {\n            if(state.projectCreateSort==0)\n            {\n                state.projectCreateList.unshift(data);\n            }\n            else\n            {\n                for(var i=0;;i++)\n                {\n                    if(i==state.projectCreateList.length || state.projectCreateList[i].name.toLowerCase()>=data.name.toLowerCase())\n                    {\n                        state.projectCreateList.splice(i,0,data);\n                        break;\n                    }\n                }\n            }\n        },\n        addTeamCreate:function (state,data) {\n            if(state.teamCreateSort==0)\n            {\n                state.teamCreateList.unshift(data);\n            }\n            else\n            {\n                for(var i=0;;i++)\n                {\n                    if(i==state.teamCreateList.length || state.teamCreateList[i].name.toLowerCase()>=data.name.toLowerCase())\n                    {\n                        state.teamCreateList.splice(i,0,data);\n                        break;\n                    }\n                }\n            }\n        },\n        addTeamJoin:function (state,data) {\n            if(state.teamJoinSort==0)\n            {\n                state.teamJoinList.unshift(data);\n            }\n            else\n            {\n                for(var i=0;;i++)\n                {\n                    if(i==state.teamJoinList.length || state.teamJoinList[i].name.toLowerCase()>=data.name.toLowerCase())\n                    {\n                        state.teamJoinList.splice(i,0,data);\n                        break;\n                    }\n                }\n            }\n        },\n        changeProjectSortCreate:function (state,data) {\n            if(state.projectCreateSort==0)\n            {\n                state.projectCreateList.sort(function (obj1,obj2) {\n                    if(obj1.createdAt>obj2.createdAt)\n                    {\n                        return -1;\n                    }\n                    else if(obj1.createdAt<obj2.createdAt)\n                    {\n                        return 1;\n                    }\n                    else\n                    {\n                        return 0;\n                    }\n                })\n            }\n            else\n            {\n                state.projectCreateList.sort(function (obj1,obj2) {\n                    if(obj1.name.toLowerCase()<obj2.name.toLowerCase())\n                    {\n                        return -1;\n                    }\n                    else if(obj1.name.toLowerCase()>obj2.name.toLowerCase())\n                    {\n                        return 1;\n                    }\n                    else\n                    {\n                        return 0;\n                    }\n                })\n            }\n        },\n        changeProjectSortJoin:function (state,data) {\n            if(state.projectJoinSort==0)\n            {\n                state.projectJoinList.sort(function (obj1,obj2) {\n                    if(obj1.createdAt>obj2.createdAt)\n                    {\n                        return -1;\n                    }\n                    else if(obj1.createdAt<obj2.createdAt)\n                    {\n                        return 1;\n                    }\n                    else\n                    {\n                        return 0;\n                    }\n                })\n            }\n            else\n            {\n                state.projectJoinList.sort(function (obj1,obj2) {\n                    if(obj1.name.toLowerCase()<obj2.name.toLowerCase())\n                    {\n                        return -1;\n                    }\n                    else if(obj1.name.toLowerCase()>obj2.name.toLowerCase())\n                    {\n                        return 1;\n                    }\n                    else\n                    {\n                        return 0;\n                    }\n                })\n            }\n        },\n        changeTeamSortCreate:function (state,data) {\n            if(state.teamCreateSort==0)\n            {\n                state.teamCreateList.sort(function (obj1,obj2) {\n                    if(obj1.createdAt>obj2.createdAt)\n                    {\n                        return -1;\n                    }\n                    else if(obj1.createdAt<obj2.createdAt)\n                    {\n                        return 1;\n                    }\n                    else\n                    {\n                        return 0;\n                    }\n                })\n            }\n            else\n            {\n                state.teamCreateList.sort(function (obj1,obj2) {\n                    if(obj1.name.toLowerCase()<obj2.name.toLowerCase())\n                    {\n                        return -1;\n                    }\n                    else if(obj1.name.toLowerCase()>obj2.name.toLowerCase())\n                    {\n                        return 1;\n                    }\n                    else\n                    {\n                        return 0;\n                    }\n                })\n            }\n        },\n    },\n    actions:{\n        addProject:function (context,data) {\n            return net.post(\"/project/create\",{\n                name:data.name,\n                dis:data.dis\n            }).then(function (data) {\n                if(data.code==200)\n                {\n                    context.commit(\"addProjectCreate\",data.data);\n                }\n                return data;\n            })\n        },\n        addTeam:function (context,data) {\n            return net.post(\"/team/save\",{\n                name:data.name,\n                dis:data.dis\n            }).then(function (data) {\n                if(data.code==200)\n                {\n                    context.commit(\"addTeamCreate\",data.data);\n                }\n                return data;\n            })\n        },\n        handleApply:function (context,data) {\n            return net.put(\"/user/handleapply\",{\n                apply:data.item._id,\n                state:data.state\n            }).then(function (data) {\n                if(data.code==200)\n                {\n                    if(typeof(data.data)==\"object\")\n                    {\n                        data.item.handle=1;\n                        context.commit(\"addTeamJoin\",data.data);\n                    }\n                    else\n                    {\n                        data.item.handle=2;\n                    }\n                }\n                else\n                {\n                    data.item.handle=3;\n                }\n            })\n        },\n        getList:function (context) {\n            return Promise.all([\n                net.get(\"/project/list\",{}),\n                net.get(\"/user/applylist\",{})\n            ]).then(function (arr) {\n                var data1=arr[0];\n                var data2=arr[1];\n                if(data1.code==200)\n                {\n                    for(var i=0;i<data1.data.project.create.length;i++)\n                    {\n                        context.state.projectCreateList.push(data1.data.project.create[i]);\n                    }\n                    for(var i=0;i<data1.data.project.join.length;i++)\n                    {\n                        context.state.projectJoinList.push(data1.data.project.join[i]);\n                    }\n                    for(var i=0;i<data1.data.team.create.length;i++)\n                    {\n                        context.state.teamCreateList.push(data1.data.team.create[i]);\n                    }\n                    for(var i=0;i<data1.data.team.join.length;i++)\n                    {\n                        context.state.teamJoinList.push(data1.data.team.join[i]);\n                    }\n                }\n                else\n                {\n                    throw data1.msg;\n                }\n                if(data2.code==200)\n                {\n                    data2.data.forEach(function (obj) {\n                        obj.handle=0;\n                    })\n                    context.state.arrApply=data2.data;\n                }\n                else\n                {\n                    throw data2.msg;\n                }\n            })\n        }\n    }\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./web/project/store.js\n// module id = 81\n// module chunks = 1"],"sourceRoot":""}