{"version":3,"sources":["webpack:///./web/share/share.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,4DAA4D;AAC5D;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,wBAAwB,+BAA+B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mCAAmC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD;AACA;AACA,CAAC,C","file":"share.js","sourcesContent":["/**\n * Created by sunxin on 2017/5/26.\n */\nif(location.hash.length<=1)\n{\n    alert(\"分享链接不正确\");\n    window.close();\n}\nvar id=location.hash.substr(1);\nvar vue=new Vue({\n    el: \"#app\",\n    data: {\n        interface:{},\n        param:[{\n            query:[{\n                name:\"\",\n                must:0,\n                remark:\"\"\n            }],\n            header:[{\n                name:\"\",\n                value:\"\",\n                remark:\"\"\n            }],\n            body:[{\n                name:\"\",\n                type:0,\n                must:0,\n                remark:\"\",\n            }],\n            param:[\n            ],\n            bodyInfo:{\n                type:0,\n                rawType:0,\n                rawTextRemark:\"\",\n                rawFileRemark:\"\",\n                rawText:\"\",\n                rawJSON:[{\n                    name:\"\",\n                    must:1,\n                    type:0,\n                    remark:\"\",\n                    show:1,\n                    mock:\"\",\n                    drag:1\n                }]\n            },\n            outInfo:{\n                type:0,\n                rawRemark:\"\",\n                rawMock:\"\",\n                jsonType:0\n            },\n            result:[],\n            resultObject:[\n                {\n                    name:\"\",\n                    must:0,\n                    type:0,\n                    remark:\"\",\n                    show:0,\n                    mock:\"\",\n                    drag:1\n                }\n            ],\n            resultArray:[\n                {\n                    name:null,\n                    must:0,\n                    type:0,\n                    remark:\"\",\n                    show:0,\n                    mock:\"\",\n                    drag:1\n                }\n            ],\n        }],\n        arrDraw:[],\n        index:0\n    },\n    computed:{\n        curParam:function () {\n            return  this.param[this.index];\n        },\n        paramSave:function () {\n            return this.curParam.param;\n        },\n        querySave:function () {\n            return this.curParam.query.filter(function (obj) {\n                if(obj.name)\n                {\n                    return true\n                }\n                else\n                {\n                    return false\n                }\n            })\n        },\n        headerSave:function () {\n            return this.curParam.header.filter(function (obj) {\n                if(obj.name)\n                {\n                    return true\n                }\n                else\n                {\n                    return false\n                }\n            });\n        },\n        bodySave:function () {\n            return this.curParam.body.filter(function (obj) {\n                if(obj.name)\n                {\n                    return true\n                }\n                else\n                {\n                    return false\n                }\n            })\n        },\n        queryCount:function () {\n            return this.querySave.length\n        },\n        headerCount:function () {\n            return this.headerSave.length\n        },\n        bodyCount:function () {\n            return this.bodySave.length\n        },\n        paramCount:function () {\n            return this.paramSave.length;\n        },\n        rawMock:function () {\n            var bJSON=false,obj={};\n            if(this.curParam.bodyInfo.type==1 && this.curParam.bodyInfo.rawType==2 && this.curParam.bodyInfo.rawJSON)\n            {\n                obj=this.curParam.bodyInfo.rawJSONType==0?{}:[];\n                bJSON=true;\n                var result=helper.resultSave(this.curParam.bodyInfo.rawJSON);\n                helper.convertToJSON(result,obj);\n            }\n            var info=helper.handleMockInfo(0,this.curParam.param,this.curParam.query,this.curParam.header,bJSON?obj:this.curParam.body,this);\n            return helper.mock(this.curParam.outInfo.rawMock,info);\n        },\n        rawJSON:function () {\n            var obj=this.curParam.bodyInfo.rawJSONType==0?{}:[];\n            var result=helper.resultSave(this.curParam.bodyInfo.rawJSON);\n            helper.convertToJSON(result,obj);\n            return helper.format(JSON.stringify(obj),1,result,this.status).draw;\n        },\n        paramTab:function () {\n            return \"Param (\"+this.paramCount+\")\";\n        },\n        queryTab:function () {\n            return \"Query (\"+this.queryCount+\")\";\n        },\n        headerTab:function () {\n            return \"Header (\"+this.headerCount+\")\";\n        },\n        bodyTab:function () {\n            return \"Body (\"+(this.bodyInfo.type==0?this.bodyCount:\"Raw\")+\")\";\n        },\n        bodyInfo:function () {\n            return this.curParam.bodyInfo;\n        },\n        outInfo:function () {\n            return this.curParam.outInfo;\n        },\n        drawMix:function () {\n            return this.arrDraw.length>0?this.arrDraw[this.index]:[];\n        },\n        editInfo:function () {\n            return this.interface?(this.interface.createdAt?((this.interface.owner?this.interface.owner.name:\"\")+\"在\"+this.interface.createdAt+\"创建，最近修改被\"+(this.interface.editor?this.interface.editor.name:\"\")+\"在\"+this.interface.updatedAt+\"改动\"):\"接口尚未保存\"):\"\";\n        },\n    },\n    methods:{\n        showInfo:function (data) {\n            this.interface=data;\n            var _this=this;\n            for(var i=1;i<_this.interface.param.length;i++)\n            {\n                _this.param.push($.clone(_this.param[0]));\n            }\n            _this.interface.param.forEach(function (objInter,index) {\n                _this.param[index].name=objInter.name;\n                _this.param[index].id=objInter.id;\n                _this.param[index].remark=objInter.remark;\n                if(objInter.queryParam.length>0)\n                {\n                    _this.param[index].query=objInter.queryParam;\n                    _this.param[index].query.forEach(function (item) {\n                        if(item.value && typeof(item.value)==\"object\" && (item.value instanceof Array))\n                        {\n                            item.value={\n                                type:0,\n                                status:\"\",\n                                data:item.value.map(function (obj) {\n                                    return {\n                                        value:obj,\n                                        remark:\"\"\n                                    }\n                                })\n                            }\n                        }\n                    })\n                    _this.param[index].query.push({\n                        name:\"\",\n                        must:0,\n                        remark:\"\"\n                    });\n                }\n                else\n                {\n                    objInter.queryParam=_this.param[index].query;\n                }\n                if(objInter.bodyParam && objInter.bodyParam.length>0)\n                {\n                    _this.param[index].body=objInter.bodyParam;\n                    _this.param[index].body.forEach(function (item) {\n                        if(item.value && typeof(item.value)==\"object\" && (item.value instanceof Array))\n                        {\n                            item.value={\n                                type:0,\n                                status:\"\",\n                                data:item.value.map(function (obj) {\n                                    return {\n                                        value:obj,\n                                        remark:\"\"\n                                    }\n                                })\n                            }\n                        }\n                    })\n                    _this.param[index].body.push({\n                        name:\"\",\n                        type:0,\n                        must:0,\n                        remark:\"\",\n                    });\n                }\n                else\n                {\n                    objInter.bodyParam=_this.param[index].body;\n                }\n                if(objInter.header.length>0)\n                {\n                    _this.param[index].header=objInter.header;\n                    _this.param[index].header.push({\n                        name:\"\",\n                        value:\"\",\n                        remark:\"\"\n                    });\n                }\n                else\n                {\n                    objInter.header=_this.param[index].header;\n                }\n                if(objInter.outParam.length>0)\n                {\n                    helper.initResultShow(objInter.outParam);\n                    _this.param[index].result=objInter.outParam;\n                }\n                else\n                {\n                    objInter.outParam=_this.param[index].result;\n                }\n                if(objInter.restParam.length>0)\n                {\n                    _this.param[index].param=objInter.restParam;\n                    _this.param[index].param.forEach(function (item) {\n                        if(item.value && typeof(item.value)==\"object\" && (item.value instanceof Array))\n                        {\n                            item.value={\n                                type:0,\n                                status:\"\",\n                                data:item.value.map(function (obj) {\n                                    return {\n                                        value:obj,\n                                        remark:\"\"\n                                    }\n                                })\n                            }\n                        }\n                    })\n                }\n                else\n                {\n                    objInter.restParam=_this.param[index].param;\n                }\n                if(objInter.bodyInfo)\n                {\n                    _this.param[index].bodyInfo=objInter.bodyInfo;\n                    if(_this.param[index].bodyInfo.rawText===undefined)\n                    {\n                        Vue.set(_this.param[index].bodyInfo,\"rawText\",\"\");\n                    }\n                    if(_this.param[index].bodyInfo.rawTextRemark===undefined)\n                    {\n                        Vue.set(_this.param[index].bodyInfo,\"rawTextRemark\",\"\");\n                    }\n                    if(_this.param[index].bodyInfo.rawFileRemark===undefined)\n                    {\n                        Vue.set(_this.param[index].bodyInfo,\"rawFileRemark\",\"\");\n                    }\n                    if(_this.param[index].bodyInfo.rawJSONType===undefined)\n                    {\n                        Vue.set(_this.param[index].bodyInfo,\"rawJSONType\",0);\n                    }\n                    if(_this.param[index].bodyInfo.rawJSON==undefined)\n                    {\n                        Vue.set(_this.param[index].bodyInfo,\"rawJSON\",_this.param[index].rawJSONObject);\n                    }\n                    else\n                    {\n                        helper.initResultShow(_this.param[index].bodyInfo.rawJSON);\n                        if(_this.param[index].bodyInfo.rawJSONType==0)\n                        {\n                            _this.param[index].rawJSONObject=_this.param[index].bodyInfo.rawJSON;\n                        }\n                        else\n                        {\n                            _this.param[index].rawJSONArray=_this.param[index].bodyInfo.rawJSON;\n                        }\n                    }\n                    var bFind=false;\n                    for(var i=0;i<_this.param[index].header.length;i++)\n                    {\n                        var obj=_this.param[index].header[i];\n                        if(obj.name.toLowerCase()==\"content-type\" && obj.value.toLowerCase()==\"application/json\")\n                        {\n                            bFind=true;\n                            break;\n                        }\n                    }\n                    if(bFind && _this.param[index].bodyInfo.rawText)\n                    {\n                        var obj;\n                        try\n                        {\n                            obj=JSON.parse(_this.param[index].bodyInfo.rawText);\n                        }\n                        catch (e)\n                        {\n\n                        }\n                        if(obj)\n                        {\n                            var result=[];\n                            for(var key in obj)\n                            {\n                                helper.handleResultData(key,obj[key],result,null,1,null,1)\n                            }\n                            _this.param[index].bodyInfo.rawJSON=result;\n                            _this.param[index].bodyInfo.rawJSONType=(obj instanceof Array)?1:0;\n                            _this.param[index].bodyInfo.rawText=\"\";\n                            _this.param[index].bodyInfo.rawType=2;\n                        }\n                    }\n                }\n                else\n                {\n                    objInter.bodyInfo=_this.param[index].bodyInfo;\n                }\n                if(objInter.outInfo)\n                {\n                    _this.param[index].outInfo=objInter.outInfo;\n                    if(_this.param[index].outInfo.jsonType===undefined)\n                    {\n                        Vue.set(_this.param[index].outInfo,\"jsonType\",0);\n                    }\n                    else if(_this.param[index].outInfo.jsonType==0)\n                    {\n                        _this.param[index].resultObject=_this.param[index].result;\n                    }\n                    else\n                    {\n                        _this.param[index].resultArray=_this.param[index].result;\n                    }\n                }\n                else\n                {\n                    objInter.outInfo=_this.param[index].outInfo;\n                }\n                if(!objInter.before)\n                {\n                    Vue.set(objInter,\"before\",{\n                        mode:0,\n                        code:\"\"\n                    })\n                }\n                else\n                {\n                    if(typeof(objInter.before)==\"string\")\n                    {\n                        objInter.before={\n                            mode:0,\n                            code:objInter.before\n                        }\n                    }\n                }\n                _this.param[index].before=objInter.before;\n                if(!objInter.after)\n                {\n                    Vue.set(objInter,\"after\",{\n                        mode:0,\n                        code:\"\"\n                    })\n                }\n                else\n                {\n                    if(typeof(objInter.after)==\"string\")\n                    {\n                        objInter.after={\n                            mode:0,\n                            code:objInter.after\n                        }\n                    }\n                }\n                _this.param[index].after=objInter.after;\n                var obj=_this.param[index].outInfo.jsonType==1?[]:{};\n                var result=helper.resultSave(_this.param[index].result);\n                var bJSON=false,objJSON={};\n                if(_this.param[index].bodyInfo.type==1 && _this.param[index].bodyInfo.rawType==2 && _this.param[index].bodyInfo.rawJSON)\n                {\n                    objJSON=_this.param[index].bodyInfo.rawJSONType==0?{}:[];\n                    bJSON=true;\n                    var result1=helper.resultSave(_this.param[index].bodyInfo.rawJSON);\n                    helper.convertToJSON(result1,objJSON);\n                }\n                var info=helper.handleMockInfo(0,_this.param[index].param,_this.param[index].query,_this.param[index].header,bJSON?objJSON:_this.param[index].body);\n                helper.convertToJSON(result,obj,info);\n                _this.arrDraw.push(helper.format(JSON.stringify(obj),1,result,this.status).draw);\n            })\n        },\n        methodColor:function (val) {\n            return helper.methodColor(val);\n        },\n    },\n    created:function () {\n        var _this=this;\n        net.get(\"/interface/share\",{\n            id:id,\n        }).then(function (data) {\n            if(data.code==200)\n            {\n                $.stopLoading();\n                _this.showInfo(data.data);\n            }\n            else\n            {\n                alert(\"接口不存在!\");\n                window.close();\n            }\n        })\n    }\n})\n$.ready(function () {\n    $.startLoading();\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./web/share/share.js\n// module id = 306\n// module chunks = 4"],"sourceRoot":""}