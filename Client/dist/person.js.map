{"version":3,"sources":["webpack:///./web/person/person.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;;AAED;AACA;AACA,CAAC","file":"person.js","sourcesContent":["/**\n * Created by sunxin on 2016/12/17.\n */\nvar mainNav=require(\"../component/mainNav.vue\")\nvar imgFile=require(\"../director/imgFile\")\nvar proxyImg=require(\"../director/proxyImg\")\nvar config=require(\"../util/config\");\nvar sessionChange=require(\"../mixins/session\");\nvar vue=new Vue({\n    el: \"#app\",\n    data: {\n        infoShow:1,\n        oldPass:\"\",\n        newPass:\"\",\n        newPass1:\"\",\n        savePending:false,\n        passPending:false,\n        sendPending:false,\n        sendInfo:{}\n    },\n    mixins:[sessionChange],\n    components:{\n        \"mainnav\":mainNav,\n    },\n    methods:{\n        saveInfo:function () {\n            var _this=this;\n            var obj={};\n            if($.query(\"#file\").value)\n            {\n                obj.photo=$.query(\"#file\").files[0];\n            }\n            if(this.session.age)\n            {\n                obj.age=this.session.age\n            }\n            if(this.session.sex)\n            {\n                obj.sex=this.session.sex\n            }\n            if(this.session.company)\n            {\n                obj.company=this.session.company\n            }\n            if(this.session.qq)\n            {\n                obj.qq=this.session.qq\n            }\n            if(this.session.email)\n            {\n                obj.email=this.session.email\n            }\n            obj.userid=this.session.id;\n            this.savePending=true;\n            net.upload(\"post\",\"/user/save\",obj).then(function (data) {\n                _this.savePending=false;\n                if(data.code==200)\n                {\n                    _this.$notify({\n                        title: '更新成功',\n                        type: 'success'\n                    });\n                    session.update(data.data);\n                    _this.session=$.clone(session.raw());\n                    _this.$emit(\"updatePhoto\",data.data.photo);\n                }\n                else\n                {\n                    _this.$notify({\n                        title: data.msg,\n                        type: 'error'\n                    });\n                }\n            })\n        },\n        editPass:function () {\n            if(!this.oldPass || !this.newPass || !this.newPass1)\n            {\n                this.$message.error(\"请填写完整信息\");\n                return;\n            }\n            else if(this.newPass!=this.newPass1)\n            {\n                this.$message.error(\"两次填写的密码不一致\");\n                return;\n            }\n            var _this=this;\n            this.passPending=true;\n            net.put(\"/user/editpass\",{\n               userid:_this.session.id,\n                oldpass:_this.oldPass,\n                newpass:_this.newPass\n            },{\n                \"content-type\":\"application/x-www-form-urlencoded\"\n            }).then(function (data) {\n                _this.passPending=false;\n                if(data.code==200)\n                {\n                    _this.$notify({\n                        title: '修改成功',\n                        type: 'success'\n                    });\n                    _this.oldPass=\"\";\n                    _this.newPass=\"\";\n                    _this.newPass1=\"\";\n                }\n                else\n                {\n                    _this.$notify({\n                        title: data.msg,\n                        type: 'error'\n                    });\n                }\n            })\n        },\n        saveSendInfo:function () {\n            if(!this.sendInfo.user)\n            {\n                $.tip(\"请输入邮箱账户\",0);\n                return;\n            }\n            else if(!this.sendInfo.password)\n            {\n                $.tip(\"请输入邮箱密码\",0);\n                return;\n            }\n            else if(!this.sendInfo.smtp)\n            {\n                $.tip(\"请输入smtp地址\",0);\n                return;\n            }\n            else if(!this.sendInfo.port)\n            {\n                $.tip(\"请输入smtp端口\",0);\n                return;\n            }\n            var _this=this;\n            this.sendPending=true;\n            net.put(\"/user/sendinfo\",this.sendInfo).then(function (data) {\n                _this.sendPending=false;\n                if(data.code==200)\n                {\n                    $.notify(\"保存成功\",1);\n                }\n                else\n                {\n                    $.notify(data.msg,0)\n                }\n            })\n        }\n    },\n    directives:{\n        \"imgfile\":imgFile,\n        \"proxy\":proxyImg\n    },\n    created:function () {\n        var _this=this;\n        net.get(\"/user/sendinfo\").then(function (data) {\n            $.stopLoading();\n            if(data.code==200)\n            {\n                _this.sendInfo=data.data;\n            }\n            else\n            {\n                $.notify(data.msg,0)\n            }\n        })\n    }\n})\n\n$.ready(function () {\n   $.startLoading();\n})\n\n\n\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./web/person/person.js\n// module id = 322\n// module chunks = 9"],"sourceRoot":""}