webpackJsonp([9],{322:function(s,e,n){(function(s,e,i,t){var o=n(7),a=n(45),d=n(10),r=(n(11),n(6));new s({el:"#app",data:{infoShow:1,oldPass:"",newPass:"",newPass1:"",savePending:!1,passPending:!1,sendPending:!1,sendInfo:{}},mixins:[r],components:{mainnav:o},methods:{saveInfo:function(){var s=this,n={};e.query("#file").value&&(n.photo=e.query("#file").files[0]),this.session.age&&(n.age=this.session.age),this.session.sex&&(n.sex=this.session.sex),this.session.company&&(n.company=this.session.company),this.session.qq&&(n.qq=this.session.qq),this.session.email&&(n.email=this.session.email),n.userid=this.session.id,this.savePending=!0,i.upload("post","/user/save",n).then(function(n){s.savePending=!1,200==n.code?(s.$notify({title:"更新成功",type:"success"}),t.update(n.data),s.session=e.clone(t.raw()),s.$emit("updatePhoto",n.data.photo)):s.$notify({title:n.msg,type:"error"})})},editPass:function(){if(!(this.oldPass&&this.newPass&&this.newPass1))return void this.$message.error("请填写完整信息");if(this.newPass!=this.newPass1)return void this.$message.error("两次填写的密码不一致");var s=this;this.passPending=!0,i.put("/user/editpass",{userid:s.session.id,oldpass:s.oldPass,newpass:s.newPass},{"content-type":"application/x-www-form-urlencoded"}).then(function(e){s.passPending=!1,200==e.code?(s.$notify({title:"修改成功",type:"success"}),s.oldPass="",s.newPass="",s.newPass1=""):s.$notify({title:e.msg,type:"error"})})},saveSendInfo:function(){if(!this.sendInfo.user)return void e.tip("请输入邮箱账户",0);if(!this.sendInfo.password)return void e.tip("请输入邮箱密码",0);if(!this.sendInfo.smtp)return void e.tip("请输入smtp地址",0);if(!this.sendInfo.port)return void e.tip("请输入smtp端口",0);var s=this;this.sendPending=!0,i.put("/user/sendinfo",this.sendInfo).then(function(n){s.sendPending=!1,200==n.code?e.notify("保存成功",1):e.notify(n.msg,0)})}},directives:{imgfile:a,proxy:d},created:function(){var s=this;i.get("/user/sendinfo").then(function(n){e.stopLoading(),200==n.code?s.sendInfo=n.data:e.notify(n.msg,0)})}});e.ready(function(){e.startLoading()})}).call(e,n(3),n(0),n(2),n(4))}},[322]);